<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Harvesting Race</title>
    <style>
        @font-face { font-family: 'TronFont'; src: url('tron.ttf'); }
        body { margin: 0; background: url("grid.webp") no-repeat center center fixed; background-size: cover; overflow: hidden; background-color: #000; }

        /* The "Private Photo" Disk */
        #game-disk { position: absolute; width: 80px; cursor: crosshair; z-index: 20; filter: drop-shadow(0 0 10px #ff00ff); transition: all 0.5s ease; }
        
        /* The Impersonator/Harvester */
        #virus { position: absolute; width: 100px; font-size: 4rem; text-align: center; filter: drop-shadow(0 0 15px #ff0000); z-index: 10; transition: all 0.9s ease; pointer-events: none; }

        .score-board { position: absolute; top: 20px; width: 100%; text-align: center; color: #00ffff; font-family: 'TronFont'; font-size: 1.5rem; z-index: 100; }
    </style>
</head>
<body>

    <div class="score-board">PHOTOS SECURED: <span id="hits">0</span>/5</div>

    <div id="virus">ðŸ‘¤</div> 
    <img src="disk.png" id="game-disk" alt="Private Photo" onclick="secureDisk()">

    <div id="win-screen" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:rgba(0,0,0,0.9); border:2px solid #00ffff; padding:40px; text-align:center; color:white; z-index:1000;">
        <h2 style="font-family:'TronFont';">DATA PROTECTED</h2>
        <p>You prevented the impersonator from harvesting your private images.</p>
        <button onclick="location.href='page10.html'" style="padding:10px 20px; font-family:'TronFont'; cursor:pointer;">DEBRIEF</button>
    </div>

    <script>

        let hits = 0;
        let diskSecuredInRound = false;
        const disk = document.getElementById('game-disk');
        const virus = document.getElementById('virus');
        const hitDisplay = document.getElementById('hits');

        const errorSound = new Audio('error.mp3');
        const successSound = new Audio('success.mp3');

        function moveElements() {
            diskSecuredInRound = false;
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 200);
            disk.style.left = x + 'px';
            disk.style.top = y + 'px';

            setTimeout(() => {
                virus.style.left = x + 'px';
                virus.style.top = y + 'px';
                setTimeout(() => {
                    if (!diskSecuredInRound && hits < 5) {
                        errorSound.play();
                        document.body.style.backgroundColor = "#400";
                        setTimeout(() => document.body.style.backgroundColor = "#000", 200);
                    }
                }, 850);
            }, 600);
        }

        let gameLoop = setInterval(moveElements, 2200);

        function secureDisk() {
            if (!diskSecuredInRound) {
                diskSecuredInRound = true;
                hits++;
                hitDisplay.innerText = hits;

                if (hits >= 5) {
                    clearInterval(gameLoop);
                    successSound.play();
                    document.getElementById('win-screen').style.display = 'block';
                }
            }
        }
    </script>
</body>
</html>