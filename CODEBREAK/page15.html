<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Resolution</title>
    <style>
        @font-face { font-family: 'TronFont'; src: url('tron.ttf'); }
        
        body { 
            margin: 0; padding: 0; 
            background: url("encryption gate.jpg") no-repeat center center fixed; 
            background-size: cover; height: 100vh; overflow: hidden; 
            background-color: #000; 
        }

        #mei-sprite { 
            position: absolute; bottom: 20%; left: 50%;
            transform: translateX(-50%); height: 60vh; 
            z-index: 5; object-fit: contain;
        }

        .dialogue-box { 
            position: absolute; bottom: 20px; left: 50%;
            transform: translateX(-50%); width: 60%; 
            background: rgba(0, 10, 20, 0.95); 
            border: 2px solid #00ffff; 
            box-shadow: 0 0 20px #00ffff; 
            padding: 25px; z-index: 10; 
            backdrop-filter: blur(8px);
        }

        .speaker-heading { 
            font-family: 'TronFont', sans-serif; 
            color: #00ffff; margin-bottom: 10px; 
            font-size: 1rem; letter-spacing: 2px;
        }

        #text-content { 
            color: #e0ffff; font-family: 'Segoe UI', sans-serif; 
            font-size: 1.1rem; line-height: 1.6; min-height: 5em;
        }

        .btn { 
            background: transparent; border: 1px solid #ff00ff; 
            color: #ff00ff; padding: 10px 25px; 
            font-family: 'TronFont', sans-serif; 
            cursor: pointer; margin-top: 15px; display: none; /* Hidden until text finishes */
        }
        
        .btn:hover { background: #ff00ff; color: black; box-shadow: 0 0 15px #ff00ff; }
    </style>
</head>
<body>

    <img src="fists.png" id="mei-sprite" alt="The Real Mei">

    <div class="dialogue-box">
        <div class="speaker-heading">USER_IDENT: MEI</div>
        <div id="text-content"></div>
        <button class="btn" id="final-btn" onclick="location.href='page16.html'">EXIT THE GRID</button>
    </div>

    <script>
    const pName = localStorage.getItem("playerTagName") || "User";
    const textElement = document.getElementById('text-content');
    const nextBtn = document.getElementById('final-btn'); // Change button text to "SYSTEM STABLE"

    const message = "You did it, " + pName + ". By identifying the glitches in the deepfake's code, you've stabilized the sector. The Harvester has been purged from the core.";

    let i = 0;
    function typeWriter() {
        if (i < message.length) {
            textElement.innerHTML += message.charAt(i);
            i++;
            setTimeout(typeWriter, 40);
        } else {
            nextBtn.innerText = "PROCEED TO GATE";
            nextBtn.onclick = () => location.href='page16.html'; // Go to the emotional page
            nextBtn.style.display = "inline-block";
        }
    }
    window.onload = typeWriter;
</script>
</body>
</html>